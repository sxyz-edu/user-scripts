// ==UserScript==
// @name           Scripts for Luogu
// @namespace      https://www.luogu.org/
// @version        0.5.0-alpha.2
// @match          https://www.luogu.org/*
// @match          https://www.luogu.com.cn/*
// @exclude        https://www.luogu.org/blog/*
// @exclude        https://www.luogu.com.cn/blog/*
// @run-at         document-start
// @updateURL      https://github.com/sxyz-edu/user-scripts/raw/alpha/dist/luogu.user.js
// @downloadURL    https://github.com/sxyz-edu/user-scripts/raw/alpha/dist/luogu.user.js
// @supportURL     https://github.com/sxyz-edu/user-scripts
// ==/UserScript==

!function(e){var r={};function t(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(o,a,function(r){return e[r]}.bind(null,a));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";t.r(r);t(1),t(6),t(7),t(8),t(9)},function(e,r,t){var o=t(2);"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t(4)(o,a);o.locals&&(e.exports=o.locals)},function(e,r,t){(e.exports=t(3)(!1)).push([e.i,'body{background:var(--lg-wallpaper) fixed;background-size:cover;background-attachment:fixed}#app-header,.content>header{background-color:transparent!important}h1{color:#333!important;opacity:var(--lg-opacity)}#nprogress .nprogress-peg{display:none;box-shadow:none!important}::-moz-selection,::-webkit-selection{background-color:#cce2ff}::-moz-selection,::-webkit-selection,::selection{background-color:#cce2ff}::-webkit-scrollbar{width:12px;height:10px;background-color:transparent}::-webkit-scrollbar-track{background-color:rgba(0,0,0,.05)}::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.2)}::-webkit-scrollbar-thumb:hover{background-color:#5e72e4}a{transition:all .15s;color:#5e72e4}a.solved{color:#1fc51f}a.unsolved{color:#f66}a.tried{color:#f90}.lg-fg-green{color:#2dce89!important}.lg-bg-red{background-color:#fb6340}.lg-bg-orange{background-color:#ff9d09}.lg-bg-purple{background-color:#8e44ad}.lg-bg-green{background-color:#2dce89}.lg-bg-bluedark{background-color:#001277}@-webkit-keyframes fadeLeft{0%{-webkit-transform:translateX(-25px);transform:translateX(-25px);opacity:0}}@keyframes fadeLeft{0%{-webkit-transform:translateX(-25px);transform:translateX(-25px);opacity:0}}.am-input-group{transition:box-shadow .15s ease}.am-form-field,.am-input-group{border:none;border-radius:.5rem!important}.am-form-field{box-shadow:0 1px 3px rgba(50,50,93,.15),0 1px 0 rgba(0,0,0,.02)}.am-form-field:focus{box-shadow:0 4px 6px rgba(50,50,93,.08),0 1px 3px rgba(0,0,0,.05)!important}.am-input-group-sm>.am-form-field,.am-input-group-sm>.am-input-group-label{font-size:1.35rem!important}.am-input-group-danger>.am-input-group-label{border-color:#f5365c!important;background-color:#ec0c38!important}.am-input-group-primary>.am-input-group-label{border-color:#5e72e4!important;background-color:#5e72e4!important;border-radius:.5rem!important}.am-input-group-danger,.am-input-group-primary{box-shadow:none}.am-input-group-danger>.am-input-group-label,.am-input-group-primary>.am-input-group-label{background:transparent;border:none;border-radius:.5rem!important;outline:none!important;letter-spacing:.05em;transition:all .15s ease;box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08);margin-bottom:6px;height:33.4px}.am-input-group-danger>.am-input-group-label:hover,.am-input-group-primary>.am-input-group-label:hover{box-shadow:0 7px 14px rgba(50,50,93,.1),0 3px 6px rgba(0,0,0,.08)}.am-input-group-danger>.am-input-group-label:active,.am-input-group-primary>.am-input-group-label:active{box-shadow:none}textarea{box-shadow:0 1px 3px rgba(50,50,93,.15),0 1px 0 rgba(0,0,0,.02);border:none!important}textarea:focus{box-shadow:0 4px 6px rgba(50,50,93,.08),0 1px 3px rgba(0,0,0,.05)!important}#topbar-search-text{border-radius:.5rem 0 0 .5em!important}#topbar-search{border-radius:0 .5rem .5em 0!important;border-color:#5e72e4;background-color:#5e72e4}.am-progress,.lg-article,.lg-article-sub,.lg-content-table-left,.lg-summary{opacity:var(--lg-opacity);background:rgba(255,255,255,var(--lg-opacity))}.lg-article,.lg-article-sub,.lg-summary{transition:all .15s ease;box-shadow:0 5px 15px rgba(50,50,93,.1),0 5px 8px rgba(0,0,0,.07)!important;word-wrap:break-word;border-radius:.25rem;background-color:#fcfcfc}.lg-article-sub:hover,.lg-article:hover,.lg-summary:hover{box-shadow:0 10px 30px rgba(50,50,93,.1),0 5px 15px rgba(0,0,0,.07)!important}.am-btn{outline:none!important;border:none!important;letter-spacing:.05em;padding:8px 18px;transition:all .15s ease;box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08);color:#fff!important;margin-bottom:6px}.am-btn:hover{box-shadow:0 7px 14px rgba(50,50,93,.1),0 3px 6px rgba(0,0,0,.08);-webkit-transform:translateY(-1px);transform:translateY(-1px)}.am-btn:active{box-shadow:none}.lg-main-content.solution-block{margin-top:0!important}.am-input-group-sm>.am-input-group-btn>.am-btn{font-size:1.35rem!important}.am-btn-danger,.am-btn-danger:active,.am-btn-danger:focus,.am-btn-danger:hover,.am-btn-danger:visited{border-color:#f5365c;background-color:#ec0c38}.am-btn-primary,.am-btn-primary:active,.am-btn-primary:focus,.am-btn-primary:hover,.am-btn-primary:visited{border-color:#5e72e4;background-color:#5e72e4}.am-btn-success,.am-btn-success:active,.am-btn-success:focus,.am-btn-success:hover,.am-btn-success:visited{border-color:#2dce89;background-color:#2dce89}.am-btn-warning,.am-btn-warning:active,.am-btn-warning:focus,.am-btn-warning:hover,.am-btn-warning:visited{border-color:#fb6340;background-color:#fb6340}.tip-twitter{background:#172b4d;color:#fff;border-radius:50px;box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08)}.tip-twitter>div{font-weight:unset!important;font-size:13px!important;margin-left:5px;margin-right:5px}.am-badge{border-radius:50px!important;padding:4px 10px;transition:all .15s}.am-badge:hover{-webkit-transform:translateY(-1px);transform:translateY(-1px);box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08)}.am-badge.lg-bg-red{background-color:#f80031}.am-badge.lg-bg-orange{background-color:#ff471d}.am-badge.lg-bg-yellow{background-color:#ff9d09}.am-badge.lg-bg-green{background-color:#1aae6f}.am-badge.lg-bg-bluelight{background-color:#03acca}.am-badge.lg-bg-purple{background-color:#8e44ad}.am-badge.lg-bg-bluedark{background-color:#001277}.am-badge.am-badge-warning{background-color:#fb6340}.am-dropdown-content{padding:1.5rem;border-radius:.25rem;background:#fff;width:300px;border:none;margin-top:5px;box-shadow:0 50px 100px rgba(50,50,93,.1),0 15px 35px rgba(50,50,93,.15),0 5px 15px rgba(0,0,0,.1)}.am-dropdown-content:after,.am-dropdown-content:before{display:none!important}.lg-unread{line-height:60px;width:60px;height:60px;padding:0;text-align:center;border-radius:50%;transition:all .15s ease;color:#fff;background-color:#5e72e4;box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08);overflow:hidden}.am-comment-main{border:none;box-shadow:0 3px 5px rgba(50,50,93,.1),0 2px 3px rgba(0,0,0,.08);transition:all .15s;opacity:var(--lg-opacity)}.am-comment-main:hover{border:none;box-shadow:0 7px 14px rgba(50,50,93,.1),0 3px 6px rgba(0,0,0,.08);opacity:var(--lg-opacity)}.am-comment-main:after,.am-comment-main:before{display:none}.lg-toolbar>.lg-index-tool{box-shadow:0 5px 15px rgba(50,50,93,.1),0 5px 8px rgba(0,0,0,.07)!important;background:#f4f5f7;padding:50px 40px;color:#32325d}.lg-content-table-left{background:#fcfcfc;box-shadow:0 0 2rem 0 rgba(136,152,170,.15)!important;border-radius:.375rem;margin-top:20px;padding-left:30px;padding-right:30px;padding-bottom:20px;position:relative}.lg-content-table-left>.lg-table-row{width:100%!important;box-shadow:none;background:transparent;border-radius:0;border-bottom:.6px solid rgba(0,0,0,.08);border-spacing:2px;padding-bottom:20px}.lg-content-table-left>.lg-table-row:last-of-type{border-bottom:none;padding-bottom:0}.feed-selector>a{font-weight:500;transition:all .15s ease;color:#5e72e4;background-color:#fff;box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08);border-radius:5px!important;height:50px;line-height:36px}.am-nav-tabs{border:none;margin-bottom:20px}.am-nav-tabs li>a{font-weight:500;transition:all .15s ease;color:#5e72e4;background-color:#fff;box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08);border-radius:5px!important;height:50px;line-height:36px;padding-left:20px;padding-right:20px;border:none!important;margin-right:10px}.am-tabs-bd{border-radius:5px;border:.6px solid rgba(0,0,0,.1);background:transparent}.am-pagination{padding-top:20px;padding-bottom:20px}.am-pagination>li>a{cursor:pointer;line-height:1.25;position:relative;display:block;margin:0 3px 0 -.0625rem;padding:.5rem .75rem;color:#8898aa;border:.0625rem solid #dee2e6;background-color:#fff;font-size:15px;font-weight:unset;min-width:36px;height:36px;border-radius:100px!important;align-items:center;justify-content:center}.feed-selector.am-active>a{color:#fff;background:#5e72e4!important}.am-pagination>.am-active>a{color:#fff;border-color:#5e72e4;background-color:#5e72e4;box-shadow:0 7px 14px rgba(50,50,93,.1),0 3px 6px rgba(0,0,0,.08)}.am-nav-tabs li.am-active>a{color:#fff!important;background:#5e72e4!important}.am-pagination>.am-active>a:hover{color:#fff;border-color:#5e72e4;background-color:#5e72e4}.lg-record-tile{transition:all .15s ease;box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08);border-radius:3px}.lg-record-tile:hover{transition:all .15s ease;-webkit-transform:translateY(-5px);transform:translateY(-5px);box-shadow:0 10px 30px rgba(50,50,93,.1),0 5px 15px rgba(0,0,0,.07)}.am-comment-avatar{box-shadow:0 15px 35px rgba(50,50,93,.1),0 5px 15px rgba(0,0,0,.07);border:none;transition:all .15s}.am-comment-avatar:hover{box-shadow:0 1rem 3rem rgba(0,0,0,.175)}.am-panel-bd .am-comment-avatar,.lg-header-li .am-comment-avatar,.lg-inline-up .am-comment-avatar,.lg-message-contact .am-comment-avatar,.lg-message-content .am-comment-avatar{box-shadow:none}.am-panel{border:none;box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08)}.lg-mcard{border:none;transition:all .15s ease;box-shadow:0 2px 3px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08);border-radius:3px}.lg-mcard:hover{transition:all .15s ease;-webkit-transform:translateY(-1px);transform:translateY(-1px);box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08)}.lg-table-small{margin-top:5px}.am-progress{border-radius:.5rem;box-shadow:inset 0 1px 2px rgba(0,0,0,.1)}.am-progress-bar,.am-progress-bar-secondary{background-color:#5e72e4}.am-ucheck-checkbox:checked+.am-ucheck-icons,.am-ucheck-checkbox:hover:not(.am-nohover):not(:disabled)+.am-ucheck-icons,.am-ucheck-radio:checked+.am-ucheck-icons,.am-ucheck-radio:hover:not(.am-nohover):not(:disabled)+.am-ucheck-icons{color:#5e72e4}.am-checkbox-inline .am-icon-unchecked:before,.am-checkbox .am-icon-unchecked:before{content:"";border:1px solid rgba(0,0,0,.1);height:15px;width:15px;border-radius:3px;margin-top:3px}.lg-info-box{color:#fff;background-color:#555abf;padding:1rem 1.5rem;border:0;border-radius:.25rem;min-height:100px!important}.lg-info-box>#pic,.lg-info-box>.lg-stamp{display:none}.lg-info-box>.am-text-left>h1{margin-bottom:10px;margin-top:10px}.lg-info-box>.am-text-left>p{margin-top:0;margin-bottom:0}.lg-info-box>.am-text-left .lg-small{margin-top:15px;margin-bottom:15px;color:hsla(0,0%,100%,.6);display:block}.am-modal-dialog{box-shadow:0 15px 35px rgba(50,50,93,.2),0 5px 15px rgba(0,0,0,.17);border:1px solid rgba(0,0,0,.2);border-radius:.5rem;outline:0;background-color:#fff;background-clip:padding-box}.am-modal-dialog>#lg-alert-title,.am-modal-dialog>#memtitle{font-family:inherit;font-weight:400;line-height:1.3;color:#32325d;text-align:left;padding-left:15px;padding-bottom:15px;border-bottom:.7px solid rgba(0,0,0,.1);margin-bottom:15px}.am-modal-dialog>#lg-alert-message,.am-modal-dialog>#memadmin{line-height:1.3;color:#32325d;text-align:left;padding-left:15px;padding-bottom:25px;padding-top:10px;border-bottom:.7px solid rgba(0,0,0,.1)}.am-modal-dialog .lg-model-content{margin-top:10px}.am-modal-btn{outline:none!important;border:none!important;letter-spacing:.05em;padding:8px 18px;transition:all .15s ease;box-shadow:0 4px 6px rgba(50,50,93,.11),0 1px 3px rgba(0,0,0,.08);color:#fafafa!important;height:unset;line-height:unset;border-radius:5px!important;margin-right:3px;display:inline-block!important;border-color:#5e72e4;background-color:#5e72e4}.am-modal-btn:active,.am-modal-btn:focus,.am-modal-btn:hover,.am-modal-btn:visited{border-color:#5e72e4;background-color:#5e72e4}.am-modal-btn:hover{box-shadow:0 7px 14px rgba(50,50,93,.1),0 3px 6px rgba(0,0,0,.08);-webkit-transform:translateY(-1px);transform:translateY(-1px)}.am-modal-btn:active{box-shadow:none}.am-modal-footer{width:-webkit-max-content;width:-moz-max-content;width:max-content;height:-webkit-max-content;height:-moz-max-content;height:max-content;display:block;margin-top:10px;margin-bottom:8px;padding:5px 5px 5px 15px}.lg-message-contact:hover{background:hsla(0,0%,78.4%,.2)}.lg-message-contact div:hover{background:transparent}.am-selected-list li:hover{background:hsla(0,0%,78.4%,.2)!important}#app-footer{margin-left:0!important}#app-sidenav{background-color:transparent!important;line-height:normal!important}#app-sidenav>a{color:#5e72e4!important}code,kbd,samp{font-family:Consolas,monospace!important}',""])},function(e,r,t){"use strict";e.exports=function(e){var r=[];return r.toString=function(){return this.map(function(r){var t=function(e,r){var t=e[1]||"",o=e[3];if(!o)return t;if(r&&"function"==typeof btoa){var a=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),n=o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"});return[t].concat(n).concat([a]).join("\n")}var i;return[t].join("\n")}(r,e);return r[2]?"@media "+r[2]+"{"+t+"}":t}).join("")},r.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},a=0;a<this.length;a++){var n=this[a][0];null!=n&&(o[n]=!0)}for(a=0;a<e.length;a++){var i=e[a];null!=i[0]&&o[i[0]]||(t&&!i[2]?i[2]=t:t&&(i[2]="("+i[2]+") and ("+t+")"),r.push(i))}},r}},function(e,r,t){var o,a,n={},i=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=o.apply(this,arguments)),a}),c=function(e){var r={};return function(e,t){if("function"==typeof e)return e();if(void 0===r[e]){var o=function(e,r){return r?r.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}r[e]=o}return r[e]}}(),l=null,s=0,d=[],p=t(5);function m(e,r){for(var t=0;t<e.length;t++){var o=e[t],a=n[o.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](o.parts[i]);for(;i<o.parts.length;i++)a.parts.push(h(o.parts[i],r))}else{var c=[];for(i=0;i<o.parts.length;i++)c.push(h(o.parts[i],r));n[o.id]={id:o.id,refs:1,parts:c}}}}function u(e,r){for(var t=[],o={},a=0;a<e.length;a++){var n=e[a],i=r.base?n[0]+r.base:n[0],c={css:n[1],media:n[2],sourceMap:n[3]};o[i]?o[i].parts.push(c):t.push(o[i]={id:i,parts:[c]})}return t}function g(e,r){var t=c(e.insertInto);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=d[d.length-1];if("top"===e.insertAt)o?o.nextSibling?t.insertBefore(r,o.nextSibling):t.appendChild(r):t.insertBefore(r,t.firstChild),d.push(r);else if("bottom"===e.insertAt)t.appendChild(r);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=c(e.insertAt.before,t);t.insertBefore(r,a)}}function b(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var r=d.indexOf(e);r>=0&&d.splice(r,1)}function f(e){var r=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var o=function(){0;return t.nc}();o&&(e.attrs.nonce=o)}return x(r,e.attrs),g(e,r),r}function x(e,r){Object.keys(r).forEach(function(t){e.setAttribute(t,r[t])})}function h(e,r){var t,o,a,n;if(r.transform&&e.css){if(!(n="function"==typeof r.transform?r.transform(e.css):r.transform.default(e.css)))return function(){};e.css=n}if(r.singleton){var i=s++;t=l||(l=f(r)),o=y.bind(null,t,i,!1),a=y.bind(null,t,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=function(e){var r=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",x(r,e.attrs),g(e,r),r}(r),o=function(e,r,t){var o=t.css,a=t.sourceMap,n=void 0===r.convertToAbsoluteUrls&&a;(r.convertToAbsoluteUrls||n)&&(o=p(o));a&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([o],{type:"text/css"}),c=e.href;e.href=URL.createObjectURL(i),c&&URL.revokeObjectURL(c)}.bind(null,t,r),a=function(){b(t),t.href&&URL.revokeObjectURL(t.href)}):(t=f(r),o=function(e,r){var t=r.css,o=r.media;o&&e.setAttribute("media",o);if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}.bind(null,t),a=function(){b(t)});return o(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;o(e=r)}else a()}}e.exports=function(e,r){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(r=r||{}).attrs="object"==typeof r.attrs?r.attrs:{},r.singleton||"boolean"==typeof r.singleton||(r.singleton=i()),r.insertInto||(r.insertInto="head"),r.insertAt||(r.insertAt="bottom");var t=u(e,r);return m(t,r),function(e){for(var o=[],a=0;a<t.length;a++){var i=t[a];(c=n[i.id]).refs--,o.push(c)}e&&m(u(e,r),r);for(a=0;a<o.length;a++){var c;if(0===(c=o[a]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete n[c.id]}}}};var v,w=(v=[],function(e,r){return v[e]=r,v.filter(Boolean).join("\n")});function y(e,r,t,o){var a=t?"":o.css;if(e.styleSheet)e.styleSheet.cssText=w(r,a);else{var n=document.createTextNode(a),i=e.childNodes;i[r]&&e.removeChild(i[r]),i.length?e.insertBefore(n,i[r]):e.appendChild(n)}}},function(e,r){e.exports=function(e){var r="undefined"!=typeof window&&window.location;if(!r)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var t=r.protocol+"//"+r.host,o=t+r.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,r){var a,n=r.trim().replace(/^"(.*)"$/,function(e,r){return r}).replace(/^'(.*)'$/,function(e,r){return r});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?e:(a=0===n.indexOf("//")?n:0===n.indexOf("/")?t+n:o+n.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}},function(e,r,t){"use strict";document.addEventListener("DOMContentLoaded",function(){if(/^\/discuss\/show\/\d+$/.test(window.location.pathname)){var e=/page=(\d+)/i.exec(window.location.href),r=window.location.pathname,t=1;if(e&&(t=Number(e[1])),!(t>1)){var o=!1;window.addEventListener("scroll",function(){var e,a;e=document.body.scrollTop||document.documentElement.scrollTop,a=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),e+2e3>a&&e+1800<a&&!o&&function(e){o=!0,fetch(r+"?page="+e).then(function(e){return e.text()}).then(function(e){for(var r=/<article[\s\S]*?<\/article>/gi,t=r.exec(e);t=r.exec(e);){o=!1;var a=document.querySelectorAll("article");a[a.length-1].outerHTML+=t[0]}}).catch(function(e){o=!1,console.error(e)})}(++t)});var a=document.querySelector(".pagination-centered");a&&a.remove()}}})},function(e,r,t){"use strict";var o=/<div class="lg-article am-hide-sm">([\s\S]*?)<\/div>/gi,a=/<span[\s\S]*?<\/span>/gi,n=/<a[^>]*?>([\s\S]*?)<\/a>/gi,i=function(e){return(e.match(n)||[]).map(function(e){return e.replace(n,"$1")})};document.addEventListener("DOMContentLoaded",function(){if("/space/show"===window.location.pathname){var e=/uid=(\d+)/.exec(window.location.href);if(!e)return;var r=e[1],t=/_uid=(\d+)/i.exec(document.cookie);if(!t)return;var n=t[1];if(r===n)return;(function(e){return new Promise(function(r,t){var n=localStorage.getItem(e);if(n)try{var c=JSON.parse(n);if(Number(new Date)-c.updateAt<=36e5)return r(c)}catch(e){console.error(e)}var l=function(e){return e||t(new Error("Parse error")),e};fetch("/space/show?uid="+e).then(function(e){return e.text()}).then(function(t){var n=(t.match(o)||[]).map(function(e){return e.replace(a,"")}),c={passedlist:i(l(n[0])),triedlist:i(l(n[2])),updateAt:Number(new Date)};localStorage.setItem(e,JSON.stringify(c)),r(c)}).catch(t)})})(n).then(function(e){var r=0,t=new Set(e.passedlist),o=new Set(e.triedlist);Array.from(document.querySelectorAll("div.lg-article > a[data-pjax]")).forEach(function(e){var a=e.innerHTML;t.has(a)?e.classList.add("solved"):(++r,o.has(a)?e.classList.add("tried"):e.classList.add("unsolved"))}),function(e){var r=document.querySelector("body > #app-body-new > div > div.am-u-md-4.lg-right >div.lg-article.am-hide-sm >h2");r&&(r.style.fontSize="18px",r.textContent="通过题目（其中你有 "+e+" 道题尚未 AC）")}(r)})}})},function(e,r,t){"use strict";document.addEventListener("DOMContentLoaded",function(){var e=/\/problemnew\/show\/(\w+)/i.exec(window.location.href);if(e){var r=e[1],t=/_uid=(\d+)/i.exec(document.cookie);if(t){var o=Number(t[1]);(function(e,r){return new Promise(function(t,o){fetch("/recordnew/lists?uid="+e+"&pid="+r).then(function(e){return e.text()}).then(function(e){var r=(new DOMParser).parseFromString(e,"text/html"),o=Array.from(r.querySelectorAll('strong[class^="lg-fg-"]'));o.length||(r.querySelectorAll("span.lg-bg-green").length?t(100):r.querySelectorAll("span.lg-bg-red").length?t(0):t(-1));var a=Math.max.apply(Math,[-1].concat(o.map(function(e){return Number(e.textContent)}).filter(function(e){return!isNaN(e)})));t(a)}).catch(o)})})(o,r).then(function(e){var t="";t='<a href="/recordnew/lists?uid='+o+"&pid="+r+'" target="_blank">'+(t=100===e?'<strong class="lg-fg-green"><i class="am-icon-check"></i></strong>':e>80?'<strong class="lg-fg-green">'+e+"</strong>":e>50?'<strong class="lg-fg-yellow">'+e+"</strong>":e>20?'<strong class="lg-fg-orange">'+e+"</strong>":e>-1?'<strong class="lg-fg-red">'+e+"</strong>":'<strong style="color: #515151;"><i class="am-icon-minus"></i></strong>')+"</a>";var a=function(){var e=document.querySelector("header h1");e?e.innerHTML=t+e.innerHTML:setTimeout(a,500)};a()})}}})},function(e,r,t){"use strict";var o=function(e){var r=e.trim();if(!r)return show_alert("提示","请输入内容");if(/^u:/i.test(r)){var t=r.slice(2);if(!(t=t.trim()))return show_alert("提示","请输入用户名或uid");/^\d+$/g.test(t)?window.location.href="/space/show?uid="+t:fetch("https://www.luogu.org/space/ajax_getuid?username="+t).then(function(e){return e.json()}).then(function(e){200!==e.code?show_alert("好像哪里有点问题","找不到该用户"):window.location.href="/space/show?uid="+e.more.uid}).catch(function(e){return console.error(e),show_alert("错误","网络超时")})}else/^(?:\d+|P\d+|CF\d+[A-Z]|SP\d+|AT\d+|UVA\d+)$/i.test(r)?window.location.href="/problemnew/show/"+r:window.location.href="/problemnew/lists?name="+r},a=function(e){e.addEventListener("keypress",function(e){if("Enter"===e.key){var r=e.target,t=r&&r.value||"";o(t)}})};document.addEventListener("DOMContentLoaded",function(){var e;"/"===window.location.pathname&&function(){var e=document.querySelector("[name=goto]");if(e){var r=e.cloneNode(!0);e.parentNode&&e.parentNode.replaceChild(r,e),r.textContent="搜索",r.addEventListener("click",function(e){e.stopImmediatePropagation();var r=document.querySelector("input[name=toproblem]"),t=r&&r.value||"";o(t)})}var t=document.querySelector("div.lg-article.lg-index-stat > h2");t&&(t.innerHTML="<h2>搜索</h2>");var n=document.querySelector("[name=toproblem]");if(n){var i=n.cloneNode(!0);i.placeholder='使用 "u:" 搜索用户',n.parentNode&&n.parentNode.replaceChild(i,n),a(i)}}(),e=function(){var r=document.querySelector(".search-wrap input");if(r){var t=r.cloneNode(!0);r.parentNode&&r.parentNode.replaceChild(t,r),a(t)}else setTimeout(e,500)},setTimeout(e,500)})}]);